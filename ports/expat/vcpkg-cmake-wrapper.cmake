include(SelectLibraryConfigurations)

set(BASENAMES expat expatw libexpat libexpatw)
set(EXPATNAMES ${BASENAMES})
list(TRANSFORM BASENAMES PREPEND "d" OUTPUT_VARIABLE DEBUGNAMES)

foreach(_CRT MT MD)
  list(TRANSFORM BASENAMES PREPEND "MT" OUTPUT_VARIABLE EXPATNAMES_CRT)
  list(TRANSFORM EXPATNAMES PREPEND "d${_CRT}" OUTPUT_VARIABLE DEBUGNAMES_CRT)
  list(APPEND EXPATNAMES ${EXPATNAMES_CRT})
  list(APPEND DEBUGNAMES ${DEBUGNAMES_CRT})
endforeach()

find_library(EXPAT_LIBRARY_DEBUG NAMES ${DEBUGNAMES} ${EXPATNAMES} NAMES_PER_DIR PATH_SUFFIXES lib PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}/debug" NO_DEFAULT_PATH)
find_library(EXPAT_LIBRARY_RELEASE NAMES ${EXPATNAMES} NAMES_PER_DIR PATH_SUFFIXES lib PATHS "${_VCPKG_INSTALLED_DIR}/${VCPKG_TARGET_TRIPLET}" NO_DEFAULT_PATH)
select_library_configurations(EXPAT)
set(EXPAT_LIBRARY "${EXPAT_LIBRARIES}" CACHE STRING "" FORCE)
_find_package(${ARGS})
if(EXPAT_FOUND AND TARGET EXPAT::EXPAT)
    if(EXPAT_LIBRARY_DEBUG)
        set_target_properties(EXPAT::EXPAT PROPERTIES IMPORTED_LOCATION_DEBUG "${EXPAT_LIBRARY_DEBUG}")
    endif()
    if(EXPAT_LIBRARY_RELEASE)
        set_target_properties(EXPAT::EXPAT PROPERTIES IMPORTED_LOCATION_RELEASE "${EXPAT_LIBRARY_RELEASE}")
    endif()
endif()

unset(EXPATNAMES)
unset(DEBUGNAMES)
